---
title: "LinuxのCPU統計情報を理解する"
date: "2024-09-07"
summary: "topコマンドで確認できる各CPU統計情報を理解しようというお話"
tags: ["Linux", "監視"]
TocOpen: true
cover:
  image: images/posts/12/cover.png
---

## はじめに

どうも。

サーバー監視やトラブルシューティングという文脈において、Linuxの各CPU統計情報の意味を理解している必要があります。

この記事のゴールは、**topコマンドで確認できる各CPU統計情報を理解すること**です。  
これを通して、Linuxへの理解を深めサーバー管理のスキル向上を目指します。

## 8種類のCPU統計情報

topコマンドを叩いたときのCPU統計情報は以下の通りです。

```
Cpu(s): 77.1%us,  8.4%sy,  0.0%ni,  0.1%id, 14.3%wa,  0.0%hi,  0.2%si,  0.0%st
```

監視という文脈においては使用率が重要です。  
使用率の前に、そもそもこれら8つの値の意味合いを確認しましょう。

| 名前 | 説明                                                                                                           |
| ---- | -------------------------------------------------------------------------------------------------------------- |
| `us` | ユーザモードで、nice値がデフォルト値0のプロセスを実行している時間の割合                                        |
| `sy` | カーネルがシステムコールを処理している時間の割合                                                               |
| `ni` | ユーザモードで、nice値がデフォルト値0から高くしたプロセスを実行している時間の割合                              |
| `id` | 何もしていないアイドル状態だった時間の割合                                                                     |
| `wa` | IO待ち時間の割合                                                                                               |
| `hi` | ハードウェア割り込み時間の割合                                                                                 |
| `si` | ソフトウェア割り込み時間の割合                                                                                 |
| `st` | 仮想マシン上においてのみ意味を持つ値で、VCPUが動作しているPCPU上で、VCPU以外のプロセスが動作している時間の割合 |

各CPU統計情報を組み合わせて重要な意味を持つものは以下です。

- `us` + `ni`: ユーザモードでプロセスを実行している時間の割合
- `id` + `wa` + `st`以外: CPU使用率

## まとめ

各CPU統計情報について説明した表を理解しておきましょう。

ではでは。
